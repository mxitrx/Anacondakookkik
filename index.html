<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ - E-Farmbook</title>
  <!-- р╕кр╕бр╕бр╕Хр╕┤р╕зр╣Ир╕▓р╕бр╕╡р╣Др╕Яр╕ер╣М styles.css р╕нр╕вр╕╣р╣Ир╕Чр╕╡р╣Ир╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Ър╣Др╕Яр╕ер╣Мр╕Щр╕╡р╣Й -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container-login">
    <h2>р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</h2>

    <form id="loginForm">
      <label for="username">р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й</label>
      <input type="text" id="username" placeholder="р╕Бр╕гр╕нр╕Бр╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й" required>

      <label for="password">р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ</label>
      <input type="password" id="password" placeholder="р╕Бр╕гр╕нр╕Бр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ" required>

      <button type="submit">р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</button>
    </form>

    <p style="text-align:center; color:#fff; margin-top:15px;">
      <a href="register.html" style="color:#c9ff00;">р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б</a> |
      <a href="forgot.html" style="color:#c9ff00;">р╕ер╕╖р╕бр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ</a>
    </p>
  </div>

  <script>
document.getElementById("loginForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  const scriptURL = "https://script.google.com/macros/s/AKfycbwgMbKIILy6BKul5aULAWfS7DZD2gyPP0D9I31CvYMwjO2IVgn7T5jlJcL3W6sIeqjx9g/exec"; // ЁЯФЧ р╣Гр╕кр╣И URL р╕Вр╕нр╕З Apps Script

  fetch(`${scriptURL}?action=login&username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}`)
    .then(res => res.text())
    .then(result => {
      if (result === "success") {
        alert("тЬЕ р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕кр╕│р╣Ар╕гр╣Зр╕И!");
        window.location.href = "home.html"; // р╕Ир╕░р╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б (р╕кр╕гр╣Йр╕▓р╕Зр╕лр╕Щр╣Йр╕▓ home.html р╕ар╕▓р╕вр╕лр╕ер╕▒р╕Зр╣Др╕Фр╣Й)
      } else {
        alert("тЭМ р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕лр╕гр╕╖р╕нр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З");
      }
    })
    .catch(err => alert("р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф: " + err));
});
</script>

</body>
</html>
